---
status: open
priority: high
created: 2026-02-05
---
# TKT-020: Introduce employer entity to support bureau model

## Summary

Currently all HR data (employees, salaries, payruns, etc.) is scoped directly to `orgId`. To support the bureau/accountant model — where an accounting firm manages payroll for multiple employer clients from a single org — we need to introduce an `employer` entity that sits between the org and the HR data.

## Motivation

- An accounting firm ("Smith & Co") needs one org in WorkOS but manages payroll for multiple clients (Bob's Bakery, Jane's Gym, etc.)
- Holding companies may have one collaborative workspace but multiple legal entities running separate payrolls
- The productivity app (tisket/client) and the HR app have fundamentally different org semantics — this decouples them

## Proposed Model

```
WorkOS Org (access boundary)
  └── Employer (data boundary)
        ├── Employees
        ├── Salaries
        ├── Payruns
        ├── HMRC details
        └── etc.
```

- **Org membership** (WorkOS): controls who can log in
- **Employer access** (app-level): controls which employers a user can see/manage within an org
- For simple cases (one company, not a bureau), org and employer are 1:1

## MCP API Considerations

The MCP API currently scopes operations via `orgId` in the session context. With the employer entity:

- Add `employer` to the MCP session context — follows the same pattern as workspace/project/team selection via the `context` tool
- All existing MCP tool signatures remain unchanged; `employerId` is resolved from session context rather than passed per-call
- For the 1:1 case (org has a single employer), auto-select it so the MCP consumer doesn't need an extra step
- Only require explicit employer selection when the org has multiple employers
- List available employers in the context tool output so callers know what's available to switch to

## Key Tasks

- [ ] Add `employer` table (id, orgId, name, legal entity details, etc.)
- [ ] Add `employer_access` join table (userId, employerId, role)
- [ ] Migrate existing data: create a default employer per org, re-scope all HR data from `orgId` to `employerId`
- [ ] Update all HR queries/routers to scope by `employerId` instead of `orgId`
- [ ] Update MCP API to resolve `employerId` from session context, auto-select for 1:1 orgs
- [ ] Add employer switcher UI within an org context
- [ ] Add cross-employer dashboard view (aggregates across all employers the user has access to)
- [ ] Ensure the simple 1:1 case feels seamless (no extra switching required)
